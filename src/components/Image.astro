---
import { Image as AstroImage } from "astro:assets";
import { postImageImport } from "../helpers/postImageImport.mjs";
const {
  src,
  MAX_WIDTH = 1400,
  imageClass = "w-full bg-gray-100",
  source = "internal",
  alt = "Blog Image",
} = Astro.props;
const relativeSrc = `../${src}`;
const imgType = relativeSrc.split(".").pop();
const { default: imgData } = await postImageImport(src);
const { width, height, src: imgSrc } = imgData;
---

{
  imgType === "bmp" ?
(
    <img src={relativeSrc} alt={alt} class={imageClass} />
  ) : (
    <AstroImage
      src={imgData}
      {alt}
      class={imageClass}
      width={width < MAX_WIDTH ? width : MAX_WIDTH}
      height={height}
    />
  )
}